
\section{System overview}\label{sec:res:sys}

\textit{Describe the system as a whole here, and what parts have been done.}

%\begin{enumerate}
    %\item Reader module (inl√§sningsmodul, name????)
    %\item Input module (indata) name???
    %\item Output module (utdata)
    %\item Purchase history db
    %\item Product data db
    %\item Parameters??? Or will we ignore this for the thesis work?
    %\item Algorithm
    %\item Control programs (But it's really just modifications of the algorithms)
    %\item General/Personalized/Related recommendations db
    %\item Remote API
    %\item Web shop
    %\item Admin web API?
%\end{enumerate}

%\Warning[TODO]{ Need a figure which describes the different parts }

%\input{results/input}
%\input{results/data}


\subsection{Reader module}

\textit{Can describe how to dynamically locate modules with python, but that's not the purpose is it? Just describe that it can be done I guess?}

The reader module takes data files, with client specific formatting, and stores the data in the databases. The data contains user interaction history of some sort, possibly as a list of user-item pairs, but it can also contain additional user and item information all in a single file or in several.

To allow for flexibility the reader module uses a plugin system which can be selected at runtime. This is accomplished using python's dynamic module loading capabilities.

Firstly the reader module will get a list of available plugins found in

\begin{lstlisting}
    lib/reader_plugins
\end{lstlisting}

The plugin class shall have a single uppercase letter and the rest lowercase and reside in a file with all lowercase. For example a plugin which handles \textit{eswc} data could have the class ``Eswc'' inside a file ``eswc.py'' in the plugin directory.

Secondly the appropriate plugin will be selected via command line arguments and the plugin class will be handed control. The class should have two methods: ``add\_arguments'' which parses extra command line arguments and ``load'' which shall return a user hash and a product hash. \Appendixref{sec:eswc_plugin} describes a full example plugin which handles \textit{eswc} data.

With the selected data the reader module can then generate matlab data file output in the form of a ``.mat'' file, upload the data to the database or simply print some statistics. When generating a ``.mat'' file different ratios of training, validation and test sets can be set. The purpose of this option is to generate datasets used during prototyping and evaluation.

The reader module will remove unused products from the dataset and it can limit the number of users and products. It does so in a couple of steps:

\begin{enumerate}
    \item Limit the number of products, if required
        \begin{enumerate}
            \item Randomly select the products to keep
            \item Remove the removed products from the user history
        \end{enumerate}
    \item Remove users with too few products in history, if required to only regard users with a minimum number of interactions
    \item Limit the number of users, if required
        \begin{enumerate}
            \item Randomly select the users to keep
        \end{enumerate}
    \item Remove unused products
\end{enumerate}



\subsection{Input module}

\subsection{Output module}

\subsection{Control program}

\textit{This isn't really ok...????}

\subsection{Data storage}\label{sec:res:data}

Database table design!

\Warning[TODO]{ Title/content }

